<!DOCTYPE html>
<html lang="es" class="dark-mode" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ‚úÖ Usar nombre de empresa desde configuraci√≥n -->
    <title th:text="${config['nombre_empresa'] != null ? config['nombre_empresa'] : 'Inicio - Ecommerce'}">Inicio - Ecommerce</title>

    <!-- SEO Meta Tags -->
    <meta th:if="${config['meta_description']}" name="description" th:content="${config['meta_description']}">
    <meta th:if="${config['meta_keywords']}" name="keywords" th:content="${config['meta_keywords']}">

    <link rel="stylesheet" href="/css/web-gamer.css">

    <!-- Colores din√°micos desde configuraci√≥n -->
    <style th:if="${config['color_primario'] != null || config['color_secundario'] != null || config['color_acento'] != null}">
        :root {
            --color-primario: [[${config['color_primario'] != null ? config['color_primario'] : '#ff006e'}]];
            --color-secundario: [[${config['color_secundario'] != null ? config['color_secundario'] : '#00f5ff'}]];
            --color-acento: [[${config['color_acento'] != null ? config['color_acento'] : '#8b00ff'}]];
        }
    </style>
</head>

<body>
    <!-- ‚úÖ Navbar Mejorado con configuraci√≥n din√°mica -->
    <nav class="navbar-gamer">
        <div class="container">
            <!-- Logo y marca -->
            <a href="/" class="navbar-brand">
                <img th:if="${config['logo_url'] != null}"
                     th:src="@{${config['logo_url']}}"
                     alt="Logo"
                     class="navbar-logo">
                <span class="brand-text" th:text="${config['nombre_empresa'] != null ? config['nombre_empresa'] : 'Ecommerce'}">Ecommerce</span>
            </a>

            <!-- Men√∫ de navegaci√≥n -->
            <div class="nav-menu">
                <a href="/" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Inicio</span>
                </a>
                <a href="/catalogo" class="nav-link">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Cat√°logo</span>
                </a>
                <a th:if="${config['whatsapp'] != null}"
                   th:href="'https://wa.me/' + ${config['whatsapp']}"
                   target="_blank"
                   class="nav-link">
                    <i class="fab fa-whatsapp"></i>
                    <span>Contacto</span>
                </a>
            </div>

            <!-- Barra de b√∫squeda -->
            <div class="search-box">
                <form action="/catalogo" method="get">
                    <input type="text" name="busqueda" class="search-input" placeholder="Buscar productos...">
                    <button type="submit" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>

            <!-- Carrito de compras -->
            <div class="navbar-actions">
                <a href="/carrito" class="cart-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-badge" id="cart-count">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- ‚úÖ Hero Section con iframe 3D -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title" th:text="${config['texto_bienvenida'] != null ? config['texto_bienvenida'] : 'Bienvenido a Nuestra Tienda'}">
                Bienvenido a Nuestra Tienda
            </h1>
            <p class="hero-subtitle" th:text="${config['nombre_empresa'] != null ? config['nombre_empresa'] : 'Los mejores productos al mejor precio'}">
                Los mejores productos al mejor precio
            </p>
            <a href="/catalogo" class="btn-gamer">
                <i class="fas fa-shopping-bag"></i>
                Ver Cat√°logo Completo
            </a>
        </div>
        <!-- Iframe 3D siempre visible -->
        <div class="hero-3d">
            <iframe src="https://my.spline.design/nintendoswitchcopy-2yhH5E9ykmD7XxrXzMr3cOYc/"
                frameborder="0"
                width="100%"
                height="100%"
                loading="lazy"></iframe>
        </div>
    </section>

    <section class="featured-section">
        <h2 class="section-title">Productos Destacados</h2>
        <div class="grid-container">
            <div th:each="producto : ${productosDestacados}" class="product-card">
                <div class="product-image">
                    >
                    <img th:if="${producto.imagenPrincipal != null}"
                        th:src="@{/uploads/productos/{filename}(filename=${producto.imagenPrincipal.url})}"
                        th:alt="'Imagen de ' + ${producto.nombre}" />
                    <img th:if="${producto.imagenPrincipal == null}" th:src="@{/img/placeholder-game.jpg}"
                        alt="Imagen por defecto" />

                    <span class="product-badge" th:if="${producto.tieneOferta()}"
                        th:text="${producto.getPorcentajeDescuento()} + '%'">Oferta</span>
                </div>
                <div class="product-body">
                    <h3 class="product-title" th:text="${producto.nombre}"></h3>
                    <p class="product-category" th:text="${producto.categoria.nombre}"></p>
                    <div class="product-price">
                        <span class="price-current" th:text="${producto.precioActual} + ' S/'"></span>
                        <span class="price-old" th:if="${producto.tieneOferta()}"
                            th:text="${producto.precioBase} + ' S/'"></span>
                    </div>
                    <a th:href="@{'/producto/' + ${producto.id}}" class="btn-outline-gamer">Ver Detalle</a>
                </div>
            </div>
        </div>
    </section>

    <!-- ‚úÖ Bot√≥n PlayStation Flotante - Redes Sociales -->
    <div class="playstation-container">
        <div class="playstation-input">
            <!-- CROSS (X) - Facebook -->
            <div id="cross-input">
                <div id="cross-title">FACEBOOK</div>
                <button id="cross" type="button" th:data-url="${config['facebook_url']}" aria-label="Facebook">
                    <p>x</p>
                </button>
            </div>

            <!-- CIRCLE (O) - Instagram -->
            <div id="circle-input">
                <div id="circle-title">INSTAGRAM</div>
                <button id="circle" type="button" th:data-url="${config['instagram_url']}" aria-label="Instagram">
                    <div></div>
                </button>
            </div>

            <!-- SQUARE - TikTok -->
            <div id="square-input">
                <div id="square-title">TIKTOK</div>
                <button id="square" type="button" th:data-url="${config['tiktok_url']}" aria-label="TikTok">
                    <div></div>
                </button>
            </div>

            <!-- TRIANGLE - Discord -->
            <div id="triangle-input">
                <div id="triangle-title">DISCORD</div>
                <button id="triangle" type="button" th:data-url="${config['discord_url']}" aria-label="Discord">
                    <p>‚ñ≥</p>
                </button>
            </div>
        </div>
    </div>

    <!-- ‚úÖ Footer con informaci√≥n de contacto desde configuraci√≥n -->
    <footer class="footer-gamer">
        <div class="container">
            <div class="footer-content">
                <!-- Informaci√≥n de empresa -->
                <div class="footer-section">
                    <h4 class="footer-title" th:text="${config['nombre_empresa'] != null ? config['nombre_empresa'] : 'Ecommerce'}">Ecommerce</h4>
                    <p th:if="${config['direccion'] != null}" th:text="${config['direccion']}"></p>
                </div>

                <!-- Contacto -->
                <div class="footer-section" th:if="${config['telefono'] != null || config['email'] != null || config['whatsapp'] != null}">
                    <h4 class="footer-title">Contacto</h4>
                    <p th:if="${config['telefono'] != null}">
                        üìû <span th:text="${config['telefono']}"></span>
                    </p>
                    <p th:if="${config['email'] != null}">
                        ‚úâÔ∏è <span th:text="${config['email']}"></span>
                    </p>
                    <p th:if="${config['whatsapp'] != null}">
                        üí¨ WhatsApp: <a th:href="'https://wa.me/' + ${config['whatsapp']}"
                                        target="_blank"
                                        style="color: #25D366;"
                                        th:text="${config['whatsapp']}"></a>
                    </p>
                </div>

                <!-- Horarios -->
                <div class="footer-section" th:if="${config['horario_atencion'] != null}">
                    <h4 class="footer-title">Horarios de Atenci√≥n</h4>
                    <p th:text="${config['horario_atencion']}"></p>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span th:text="${#temporals.year(#temporals.createNow())}">2025</span>
               <span th:text="${config['nombre_empresa'] != null ? config['nombre_empresa'] : 'Ecommerce'}"></span> -
               Todos los derechos reservados
            </p>
        </div>
    </footer>

    <!-- JavaScript para bot√≥n PlayStation -->
    <script src="/js/web-gamer.js"></script>
</body>

</html>