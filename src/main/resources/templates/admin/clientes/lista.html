<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head('Clientes')"></head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <div th:replace="fragments/header :: header"></div>
        <div th:replace="fragments/sidebar :: sidebar"></div>

        <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <h1 class="m-0"><i class="fas fa-users"></i> Clientes</h1>
                </div>
            </div>
            <section class="content">
                <div class="container-fluid">
                    <div class="card">
                        <div class="card-body">
                            <div class="row mb-2">
                                <div class="col-md-4"><a th:href="@{/admin/clientes/nuevo}"
                                        class="btn btn-success">Nuevo Cliente</a></div>
                                <div class="col-md-4"><input id="clienteSearch" class="form-control"
                                        placeholder="Buscar por nombre o doc"></div>
                            </div>
                            <table class="table table-striped datatable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Nombre</th>
                                        <th>Documento</th>
                                        <th>Teléfono</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="c : ${clientes}">
                                        <td th:text="${c.id}">1</td>
                                        <td th:text="${c.nombreCompleto}">Cliente</td>
                                        <td th:text="${c.tipoDocumento + ' - ' + c.numeroDocumento}">DNI</td>
                                        <td th:text="${c.telefono}">999999999</td>
                                        <td><a th:href="@{/admin/clientes/ver/{id}(id=${c.id})}"
                                                class="btn btn-sm btn-info"><i class="fas fa-eye"></i></a>
                                            <a th:href="@{/admin/clientes/editar/{id}(id=${c.id})}"
                                                class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
                                            <a th:href="@{/admin/clientes/eliminar/{id}(id=${c.id})}"
                                                class="btn btn-sm btn-danger btn-delete"
                                                th:data-name="${c.nombreCompleto}"><i class="fas fa-trash"></i></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <div th:replace="fragments/footer :: footer"></div>
    </div>
    <div th:replace="fragments/scripts :: scripts"></div>

    <script>
        $(document).ready(function () {
            // búsqueda via endpoint (opcional): GET /admin/api/clientes/buscar?term=
            $('#clienteSearch').on('keyup', function (e) {
                const term = $(this).val();
                $('.datatable').DataTable().search(term).draw();
            });
        });
    </script>
</body>

</html>