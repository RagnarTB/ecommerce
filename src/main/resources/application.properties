# ============================================
# CONFIGURACIÓN DE LA APLICACIÓN E-COMMERCE
# ============================================

# NOMBRE DE LA APLICACIÓN
spring.application.name=ecommerce

# ============================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================
# Puerto donde correrá la aplicación (http://localhost:8080)
server.port=8080
# Contexto de la aplicación (URL base)
server.servlet.context-path=/

# ============================================
# CONFIGURACIÓN DE BASE DE DATOS MYSQL
# ============================================
# URL de conexión a MySQL
# localhost:3306 = servidor MySQL en tu computadora
# ecommerce_db = nombre de la base de datos
spring.datasource.url=jdbc:mysql://localhost:3306/ecommerce_db?useSSL=false&serverTimezone=America/Lima&allowPublicKeyRetrieval=true

# Usuario de MySQL
spring.datasource.username=root

# Contraseña de MySQL
spring.datasource.password=root123

# Driver de MySQL (el conector)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# ============================================
# Dialecto de MySQL (lenguaje SQL específico de MySQL)
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Estrategia de actualización de base de datos:
# - create: BORRA y crea las tablas cada vez (¡CUIDADO! Pierdes datos)
# - update: Actualiza las tablas sin borrar datos
# - validate: Solo valida que las tablas existan
# - none: No hace nada
spring.jpa.hibernate.ddl-auto=update

# Mostrar las consultas SQL en la consola (útil para aprender)
spring.jpa.show-sql=true

# Formatear las consultas SQL para que se vean mejor
spring.jpa.properties.hibernate.format_sql=true

# ============================================
# CONFIGURACIÓN DE THYMELEAF (Plantillas HTML)
# ============================================
# Habilitar Thymeleaf
spring.thymeleaf.enabled=true

# Ubicación de las plantillas
spring.thymeleaf.prefix=classpath:/templates/

# Extensión de los archivos
spring.thymeleaf.suffix=.html

# Modo de plantilla (HTML5 estándar)
spring.thymeleaf.mode=HTML

# Codificación de caracteres (para acentos y ñ)
spring.thymeleaf.encoding=UTF-8

# Cache deshabilitado en desarrollo (los cambios se ven inmediatamente)
spring.thymeleaf.cache=false

# ============================================
# CONFIGURACIÓN DE ARCHIVOS SUBIDOS
# ============================================
# Tamaño máximo por archivo (10MB)
spring.servlet.multipart.max-file-size=10MB

# Tamaño máximo de la petición completa (50MB)
spring.servlet.multipart.max-request-size=50MB

# Habilitar multipart (subida de archivos)
spring.servlet.multipart.enabled=true

# ============================================
# CONFIGURACIÓN DE RECURSOS ESTÁTICOS
# ============================================

# ruta absoluta o relativa donde guardas archivos
app.upload.dir=/app/uploads/productos/
# y asegúrate de exponerla como recursos estáticos
spring.web.resources.static-locations=classpath:/static/,file:/app/uploads/


# ============================================
# CONFIGURACIÓN DE SEGURIDAD (Spring Security)
# ============================================
# Habilitar seguridad
spring.security.enabled=true

# ============================================
# CONFIGURACIÓN DE API DECOLECTA
# ============================================
# Token de autenticación de Decolecta
api.decolecta.token=sk_9739.xfKEozZkKVg69oje8RACY8preIWY6nwh

# URL base de la API
api.decolecta.base-url=https://api.decolecta.com/v1

# Endpoints específicos
api.decolecta.dni-url=${api.decolecta.base-url}/reniec/dni
api.decolecta.ruc-url=${api.decolecta.base-url}/sunat/ruc

# ============================================
# CONFIGURACIÓN DE LOGGING (Registros/Logs)
# ============================================
# Nivel de log general (INFO = información normal)
logging.level.root=INFO

# Nivel de log para tu aplicación (DEBUG = muestra más detalles)
logging.level.com.miempresa.ecommerce=DEBUG

# Nivel de log para Spring Security
logging.level.org.springframework.security=INFO

# Nivel de log para Hibernate (las consultas SQL)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ============================================
# CONFIGURACIÓN DE ZONA HORARIA
# ============================================
# Zona horaria de Perú
spring.jpa.properties.hibernate.jdbc.time_zone=America/Lima

# ============================================
# CONFIGURACIÓN DE SESIONES
# ============================================
# Tiempo de expiración de sesión (30 minutos)
server.servlet.session.timeout=30m

# Nombre de la cookie de sesión
server.servlet.session.cookie.name=ECOMMERCE_SESSION

# ============================================
# CONFIGURACIÓN DE MENSAJES DE ERROR
# ============================================
# Incluir mensaje de error en la respuesta
server.error.include-message=always

# Incluir stacktrace (solo en desarrollo)
server.error.include-stacktrace=on_param

# ============================================
# CONFIGURACIÓN ADICIONAL
# ============================================
# Formatear fechas en JSON
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=America/Lima